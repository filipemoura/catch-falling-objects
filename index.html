<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pegue os Objetos que Caem!</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.70.0/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #87CEEB;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: Arial, sans-serif;
        }
        #game-container {
            border: 3px solid #FFD700;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="game-container"></div>
    
    <script>
        class GameScene extends Phaser.Scene {
            constructor() {
                super({ key: 'GameScene' });
                this.score = 0;
            }

            create() {
                // Fundo azul
                this.add.rectangle(400, 300, 800, 600, 0x87CEEB);
                
                // Título
                this.add.text(400, 80, 'PEGUE OS OBJETOS!', {
                    fontSize: '28px',
                    fill: '#FFFFFF',
                    stroke: '#000000',
                    strokeThickness: 2
                }).setOrigin(0.5);
                
                // Pontuação
                this.scoreText = this.add.text(20, 20, 'Pontos: 0', {
                    fontSize: '24px',
                    fill: '#FFFFFF',
                    stroke: '#000000',
                    strokeThickness: 2
                });
                
                // Cesta
                this.basket = this.add.rectangle(400, 520, 80, 30, 0x8B4513);
                this.physics.add.existing(this.basket);
                this.basket.body.setImmovable(true);
                
                // Grupo de objetos
                this.items = [];
                
                // Controles
                this.cursors = this.input.keyboard.createCursorKeys();
                
                // Mouse/touch
                this.input.on('pointerdown', (pointer) => {
                    this.basket.x = Phaser.Math.Clamp(pointer.x, 50, 750);
                });
                
                this.input.on('pointermove', (pointer) => {
                    if (pointer.isDown) {
                        this.basket.x = Phaser.Math.Clamp(pointer.x, 50, 750);
                    }
                });
                
                // Timer para criar objetos
                this.time.addEvent({
                    delay: 2000,
                    callback: this.createItem,
                    callbackScope: this,
                    loop: true
                });
                
                // Criar primeiro objeto
                this.createItem();
            }
            
            createItem() {
                const colors = [0xFF0000, 0x00FF00, 0x0000FF, 0xFFFF00, 0xFF00FF];
                const color = Phaser.Utils.Array.GetRandom(colors);
                const x = Phaser.Math.Between(50, 750);
                
                const item = this.add.circle(x, 50, 20, color);
                item.speed = 2;
                
                this.items.push(item);
            }
            
            update() {
                // Mover cesta com teclado
                if (this.cursors.left.isDown) {
                    this.basket.x -= 6;
                }
                if (this.cursors.right.isDown) {
                    this.basket.x += 6;
                }
                
                // Manter cesta na tela
                this.basket.x = Phaser.Math.Clamp(this.basket.x, 50, 750);
                
                // Mover objetos
                for (let i = this.items.length - 1; i >= 0; i--) {
                    const item = this.items[i];
                    item.y += item.speed;
                    
                    // Verificar colisão
                    const distance = Phaser.Math.Distance.Between(
                        item.x, item.y, this.basket.x, this.basket.y
                    );
                    
                    if (distance < 45) {
                        // Capturou!
                        this.score += 10;
                        this.scoreText.setText('Pontos: ' + this.score);
                        this.cameras.main.flash(200, 255, 255, 255);
                        
                        item.destroy();
                        this.items.splice(i, 1);
                    }
                    else if (item.y > 650) {
                        // Saiu da tela
                        item.destroy();
                        this.items.splice(i, 1);
                    }
                }
            }
        }

        // Configuração simples
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            parent: 'game-container',
            backgroundColor: '#87CEEB',
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 0 }
                }
            },
            scene: GameScene
        };

        // Iniciar
        const game = new Phaser.Game(config);
    </script>
</body>
</html>